(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e52f720"],{"3d40":function(e,t,r){"use strict";r("8228")},"7e41":function(e,t,r){"use strict";var a=r("6e6d");t["a"]=new a["default"]},8228:function(e,t,r){},d218:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-tabs",{attrs:{type:"border-card"}},[r("el-button",{staticClass:"creata-tag",attrs:{type:"primary",size:"small"},on:{click:e.createTag}},[e._v("添加标签"),r("i",{staticClass:"el-icon-upload el-icon--right"})]),r("el-tab-pane",{staticClass:"box-card-container",attrs:{label:"标签管理"}},[r("el-row",{staticClass:"demo-autocomplete",attrs:{gutter:20}},e._l(e.CategoryList,(function(t,a){return r("el-col",{key:t.id,attrs:{lg:6,md:18,xs:24}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(t.name))]),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[e._v("操作按钮")])],1),e._l(t.subcategories,(function(t,n){return r("el-tag",{key:t.id,staticClass:"tag-item",attrs:{closable:"","disable-transitions":!1},on:{close:function(r){return e.handleClose(t.id,2,a,n)}}},[e._v(" "+e._s(t.name)+" ")])})),e.inputVisible===a?r("el-input",{ref:"saveTagInput",refInFor:!0,staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(r){return e.handleInputConfirm(t.id,a)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.target.blur(t)}},model:{value:e.inputValue[a],callback:function(t){e.$set(e.inputValue,a,t)},expression:"inputValue[index]"}}):r("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){return e.showInput(a)}}},[e._v("+ New Tag")])],2)],1)})),1)],1)],1),r("addTag",{on:{createParentTag:e.createParentTag}})],1)},n=[],i=(r("ea69"),r("6a61"),r("2e91")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:"创建分类",visible:e.dialogFormVisible,width:e.dialogWidth},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-position":e.labelPosition,rules:e.rules}},[r("el-form-item",{attrs:{label:"分类名称","label-width":e.formLabelWidth,prop:"name"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入分类名称",maxlength:"15","show-word-limit":""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},s=[],l=(r("053b"),r("7e41")),c={data:function(){return{dialogFormVisible:!1,form:{name:""},formLabelWidth:"100px",labelPosition:"left",dialogWidth:"50%",rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}]}}},computed:{device:function(){return this.$store.state.app.device}},mounted:function(){var e=this;l["a"].$off("creataTag"),l["a"].$on("creataTag",(function(){e.dialogFormVisible=!0})),this.labelPosition="desktop"===this.device?"left":"top",this.dialogWidth="desktop"===this.device?"50%":"90%"},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$emit("createParentTag",t.form.name),t.resetForm("ruleForm")}))},resetForm:function(e){this.$refs[e].resetFields(),this.dialogFormVisible=!1}}},u=c,d=r("5d22"),f=Object(d["a"])(u,o,s,!1,null,null,null),m=f.exports,g=r("d28d"),p={components:{addTag:m},data:function(){return{dynamicTags:["标签一","标签二","标签三"],inputVisible:-1,CategoryList:[],inputValue:[]}},mounted:function(){this.getCategoryList()},methods:{getCategoryList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={categoryId:"",type:1},t.next=3,Object(g["c"])(r);case 3:a=t.sent,n=a.data,e.CategoryList=n;case 6:case"end":return t.stop()}}),t)})))()},createTag:function(){l["a"].$emit("creataTag")},createParentTag:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.createCategory("",e,1);case 2:case"end":return r.stop()}}),r)})))()},createCategory:function(e,t,r){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={categoryId:e,name:t,type:r},n.next=3,Object(g["a"])(i);case 3:o=n.sent,s=o.data,console.log(s),a.getCategoryList();case 7:case"end":return n.stop()}}),n)})))()},handleClose:function(e,t,r,a){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function i(){var o,s,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o={categoryId:e,type:t},i.next=3,Object(g["b"])(o);case 3:s=i.sent,l=s.code,200===l&&n.CategoryList[r].subcategories.splice(a,1);case 6:case"end":return i.stop()}}),i)})))()},showInput:function(e){var t=this;console.log(e),this.inputVisible=e,this.$nextTick((function(r){console.log(t.$refs.saveTagInput[e]),t.$refs.saveTagInput[e].$refs.input.focus()}))},handleInputConfirm:function(e,t){var r=this.inputValue;r&&this.dynamicTags.push(r),""!==r[t]&&(this.createCategory(e,r[t],2),this.inputVisible=-1,this.inputValue=[])}}},h=p,b=(r("3d40"),Object(d["a"])(h,a,n,!1,null,"77163059",null));t["default"]=b.exports},d28d:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return o}));var a=r("b775");function n(e){return Object(a["a"])({url:"/api/category/createCategory",method:"POST",data:e})}function i(e){return Object(a["a"])({url:"/api/category/getCategory",method:"GET",params:e})}function o(e){return Object(a["a"])({url:"/api/category/delCategory",method:"POST",data:e})}},ea69:function(e,t,r){"use strict";var a=r("1c8b"),n=r("e1d6"),i=r("3da3"),o=r("d88d"),s=r("3553"),l=r("1ca1"),c=r("1bbd"),u=r("1ea7"),d=r("ff9c"),f=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,p=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!m},{splice:function(e,t){var r,a,u,d,f,m,v=s(this),y=o(v.length),w=n(e,y),C=arguments.length;if(0===C?r=a=0:1===C?(r=0,a=y-w):(r=C-2,a=p(g(i(t),0),y-w)),y+r-a>h)throw TypeError(b);for(u=l(v,a),d=0;d<a;d++)f=w+d,f in v&&c(u,d,v[f]);if(u.length=a,r<a){for(d=w;d<y-a;d++)f=d+a,m=d+r,f in v?v[m]=v[f]:delete v[m];for(d=y;d>y-a+r;d--)delete v[d-1]}else if(r>a)for(d=y-a;d>w;d--)f=d+a-1,m=d+r-1,f in v?v[m]=v[f]:delete v[m];for(d=0;d<r;d++)v[d+w]=arguments[d+2];return v.length=y-a+r,u}})}}]);