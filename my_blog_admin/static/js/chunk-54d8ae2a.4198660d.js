(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54d8ae2a"],{5333:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var r=a("b775");function i(e){return Object(r["a"])({url:"/api/img/createImg",method:"POST",data:e})}function n(e){return Object(r["a"])({url:"/api/img/getImgList",method:"GET",params:e})}},6752:function(e,t,a){"use strict";a("a0cf")},"91b6":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("b775");function i(e){return Object(r["a"])({url:"/api/upload/uploadImg",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:e})}},a0cf:function(e,t,a){},aac3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-article"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"添加图片"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-position":e.labelPosition,"label-width":"90px",rules:e.rule}},[a("el-row",{staticClass:"demo-autocomplete",attrs:{gutter:20}},[a("el-col",{attrs:{lg:10,md:12,xs:24}},[a("el-form-item",{attrs:{label:"选择分类",prop:"categoryId"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.form.categoryId,callback:function(t){e.$set(e.form,"categoryId",t)},expression:"form.categoryId"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+","+e.name}})})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"封面和摘要"}},[a("div",{staticClass:"bottomMiddle"},[a("el-row",{staticClass:"demo-autocomplete",attrs:{gutter:5}},[a("el-col",{attrs:{lg:4,md:6,xs:24}},[a("el-upload",{ref:"upload",staticClass:"avatar",class:e.fileList.length>0?"active":"",attrs:{action:"1",multiple:"",limit:e.limit,accept:"image/jpeg,image/jpg,image/png,image/bmp,image/webp,image/gif","on-change":e.beforeAvatarUpload,"on-remove":e.handRemove,"list-type":"picture-card","auto-upload":!1,"file-list":e.fileList,"http-request":e.uploadSuccess}},[0===e.fileList.length?a("i",{staticClass:"el-icon-plus"}):e._e()])],1)],1)],1)]),a("el-row",{staticClass:"demo-autocomplete"},[a("el-col",{attrs:{lg:20,md:18,xs:24}},[a("el-form-item",{staticClass:"bottom"},[a("el-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:function(t){return e.saveClick("form")}}},[e._v(e._s(e.isLoading?"提交中":"保存"))])],1)],1)],1)],1)],1)],1)],1)},i=[],n=(a("e35a"),a("0d7a"),a("6a61"),a("2e91")),o=a("d28d"),s=a("91b6"),c=a("5333"),l={data:function(){return{labelPosition:"left",limit:9,options:[],fileList:[],fileData:"",fileInfo:"",isLoading:!1,form:{categoryId:""},rule:{categoryId:[{required:!0,message:"请选择一级分类",trigger:"blur"}]}}},computed:{device:function(){return this.$store.state.app.device}},watch:{device:function(){this.labelPosition="desktop"===this.device?"left":"top"}},mounted:function(){this.getCategoryList(),this.labelPosition="desktop"===this.device?"left":"top"},methods:{getCategoryList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])();case 2:a=t.sent,r=a.data,e.options=r;case 5:case"end":return t.stop()}}),t)})))()},saveClick:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(r){var i,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=12;break}if(t.$refs.upload.submit(),0===t.fileList.length){a.next=5;break}return a.next=5,Object(s["a"])(t.fileData).then((function(e){t.fileInfo=e.data}));case 5:return i={imgUrl:t.fileInfo,categoryId:t.form.categoryId.split(",")[0],categoryName:t.form.categoryId.split(",")[1]},a.next=8,Object(c["a"])(i);case 8:n=a.sent,o=n.code,200===o&&(t.$message.success("创建成功!"),t.$refs[e].resetFields()),t.fileInfo="";case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},beforeAvatarUpload:function(e,t){console.log(e,t),this.fileList=t;var a="image/jpeg"===e.type||"image/jpg",r=e.size/1024/1024<10;return a||this.$message.error("上传头像图片只能是 /jpeg/png/jpeg 格式!"),r||this.$message.error("上传头像图片大小不能超过 10MB!"),a&&r},handRemove:function(e,t){this.fileList=t},uploadSuccess:function(e){this.fileData=new FormData,this.fileData.append("file",e.file)}}},u=l,d=(a("6752"),a("5d22")),f=Object(d["a"])(u,r,i,!1,null,"ffa94d1c",null);t["default"]=f.exports},d28d:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return o}));var r=a("b775");function i(e){return Object(r["a"])({url:"/api/category/createCategory",method:"POST",data:e})}function n(e){return Object(r["a"])({url:"/api/category/getCategory",method:"GET",params:e})}function o(e){return Object(r["a"])({url:"/api/category/delCategory",method:"POST",data:e})}}}]);