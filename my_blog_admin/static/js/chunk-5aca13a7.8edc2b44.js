(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5aca13a7"],{"6bf8":function(t,e,r){"use strict";r("a41f")},"7e41":function(t,e,r){"use strict";var a=r("6e6d");e["a"]=new a["default"]},a41f:function(t,e,r){},d218:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-tabs",{attrs:{type:"border-card"}},[r("el-button",{staticClass:"creata-tag",attrs:{type:"primary",size:"small"},on:{click:t.createTag}},[t._v("添加标签"),r("i",{staticClass:"el-icon-upload el-icon--right"})]),r("el-tab-pane",{staticClass:"box-card-container",attrs:{label:"标签管理"}},[r("el-row",{staticClass:"demo-autocomplete",attrs:{gutter:20}},t._l(t.CategoryList,(function(e,a){return r("el-col",{key:e.id,attrs:{lg:6,md:18,xs:24}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v(t._s(e.name))]),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[t._v("操作按钮")])],1),t._l(e.subcategories,(function(e,n){return r("el-tag",{key:e.id,staticClass:"tag-item",attrs:{closable:"","disable-transitions":!1},on:{close:function(r){return t.handleClose(e.id,2,a,n)}}},[t._v(" "+t._s(e.name)+" ")])})),t.inputVisible===a?r("el-input",{ref:"saveTagInput",refInFor:!0,staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(r){return t.handleInputConfirm(e.id,a)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur(e)}},model:{value:t.inputValue[a],callback:function(e){t.$set(t.inputValue,a,e)},expression:"inputValue[index]"}}):r("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){return t.showInput(a)}}},[t._v("+ New Tag")])],2)],1)})),1)],1)],1),r("addTag",{on:{createParentTag:t.createParentTag}})],1)},n=[],i=(r("ea69"),r("6db4"),r("6a61"),r("2e91")),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{attrs:{title:"创建分类",visible:t.dialogFormVisible,width:t.dialogWidth},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{ref:"ruleForm",attrs:{model:t.form,"label-position":t.labelPosition,rules:t.rules}},[r("el-form-item",{attrs:{label:"分类名称","label-width":t.formLabelWidth,prop:"name"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入分类名称",maxlength:"15","show-word-limit":""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)},s=[],l=(r("053b"),r("7e41")),c={data:function(){return{dialogFormVisible:!1,form:{name:""},formLabelWidth:"100px",labelPosition:"left",dialogWidth:"50%",rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}]}}},computed:{device:function(){return this.$store.state.app.device}},mounted:function(){var t=this;l["a"].$off("creataTag"),l["a"].$on("creataTag",(function(){t.dialogFormVisible=!0})),this.labelPosition="desktop"===this.device?"left":"top",this.dialogWidth="desktop"===this.device?"50%":"90%"},methods:{submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.$emit("createParentTag",e.form.name),e.resetForm("ruleForm")}))},resetForm:function(t){this.$refs[t].resetFields(),this.dialogFormVisible=!1}}},u=c,d=r("5d22"),f=Object(d["a"])(u,o,s,!1,null,null,null),m=f.exports,g=r("d28d"),p={components:{addTag:m},data:function(){return{dynamicTags:["标签一","标签二","标签三"],inputVisible:-1,CategoryList:[],inputValue:[]}},mounted:function(){this.getCategoryList()},methods:{getCategoryList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={categoryId:"",type:1},e.next=3,Object(g["c"])(r);case 3:a=e.sent,n=a.data,t.CategoryList=n;case 6:case"end":return e.stop()}}),e)})))()},createTag:function(){l["a"].$emit("creataTag")},createParentTag:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.createCategory("",t,1);case 2:case"end":return r.stop()}}),r)})))()},createCategory:function(t,e,r){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={categoryId:t,name:e,type:r},n.next=3,Object(g["a"])(i);case 3:o=n.sent,s=o.data,console.log(s),a.getCategoryList();case 7:case"end":return n.stop()}}),n)})))()},handleClose:function(t,e,r,a){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function i(){var o,s,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o={categoryId:t,type:e},i.next=3,Object(g["b"])(o);case 3:s=i.sent,l=s.code,200===l&&n.CategoryList[r].subcategories.splice(a,1);case 6:case"end":return i.stop()}}),i)})))()},showInput:function(t){var e=this;this.inputVisible=t,this.$nextTick((function(t){e.$refs.saveTagInput[0].$refs.input.focus()}))},handleInputConfirm:function(t,e){var r=this.inputValue;r&&this.dynamicTags.push(r),console.log("value:",r[e]),r[e]&&r[e].trim()?(this.createCategory(t,r[e],2),this.inputVisible=-1,this.inputValue=[]):this.inputVisible=-1}}},h=p,b=(r("6bf8"),Object(d["a"])(h,a,n,!1,null,"7ff22325",null));e["default"]=b.exports},d28d:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return o}));var a=r("b775");function n(t){return Object(a["a"])({url:"/api/category/createCategory",method:"POST",data:t})}function i(t){return Object(a["a"])({url:"/api/category/getCategory",method:"GET",params:t})}function o(t){return Object(a["a"])({url:"/api/category/delCategory",method:"POST",data:t})}},ea69:function(t,e,r){"use strict";var a=r("1c8b"),n=r("e1d6"),i=r("3da3"),o=r("d88d"),s=r("3553"),l=r("1ca1"),c=r("1bbd"),u=r("1ea7"),d=r("ff9c"),f=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,p=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!m},{splice:function(t,e){var r,a,u,d,f,m,v=s(this),y=o(v.length),w=n(t,y),C=arguments.length;if(0===C?r=a=0:1===C?(r=0,a=y-w):(r=C-2,a=p(g(i(e),0),y-w)),y+r-a>h)throw TypeError(b);for(u=l(v,a),d=0;d<a;d++)f=w+d,f in v&&c(u,d,v[f]);if(u.length=a,r<a){for(d=w;d<y-a;d++)f=d+a,m=d+r,f in v?v[m]=v[f]:delete v[m];for(d=y;d>y-a+r;d--)delete v[d-1]}else if(r>a)for(d=y-a;d>w;d--)f=d+a-1,m=d+r-1,f in v?v[m]=v[f]:delete v[m];for(d=0;d<r;d++)v[d+w]=arguments[d+2];return v.length=y-a+r,u}})}}]);