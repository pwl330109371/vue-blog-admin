(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c460ce0"],{1733:function(e,t,n){"use strict";n("9ed1")},3314:function(e,t,n){"use strict";n("4274")},"40cd":function(e,t,n){"use strict";n("db68")},4274:function(e,t,n){},8256:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:e.fullscreen}},[e.isInline?e._e():n("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),e.isInline?n("div",{class:{isInline:e.isInline},style:{height:e.height+"px"},attrs:{id:e.tinymceId}}):e._e(),e.isInline?e._e():n("div",{staticClass:"editor-custom-btn-container"})])},a=[],c=(n("ecb4"),n("3e54"),n("513c"),n("20a5"),n("e18c"),n("e35a"),n("f4e3"),n("0d7a"),n("8256b"),n("ab6e"),n("927c"),n("3c51"),n("db0a"),n("1cc1"),n("ab0f"),n("fc6e"),n("f30b"),n("cfd1"),n("d104"),n("f74a"),n("3598"),n("b497"),n("2909"),n("a7ef"),n("b523"),n("e671"),n("4140"),n("83db"),n("829d"),n("939f"),n("1bb1"),n("c3ba"),n("6a61"),n("2e91")),o=["advlist  autolink autosave contextmenu directionality emoticons codesample fullscreen hr image imagetools media insertdatetime  lists  nonbreaking noneditable  paste preview print save searchreplace spellchecker tabfocus table template textcolor     "],r=o,s=[" searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent   undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap  anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen formatselect fontselect"],l=s,u=n("91b6"),d={name:"Tinymce",props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"false"},height:{type:Number,required:!1,default:450},isInline:{type:Boolean,default:!1}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"},fileId:null,imgUrl:null}},computed:{language:function(){return this.languageTypeList["zh"]}},watch:{value:function(e){var t=this;console.log(456),!this.hasChange&&this.hasInit&&(console.log(890),this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")})))},language:function(){var e=this;this.destroyTinymce(),this.$nextTick((function(){return e.initTinymce()}))},height:function(e){this.initTinymce()}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var e=this,t=this;window.tinymce.init({convert_urls:!0,inline:t.isInline,statusbar:!1,language:this.language,selector:"#".concat(this.tinymceId),branding:!1,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:l,menubar:this.menubar,plugins:r,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){t.value&&n.setContent(t.value),t.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",n.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))},images_upload_handler:function(e,n,i,a){t.uploadImg(e,n,i,a)}})},uploadImg:function(e,t,n,i){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var i,c,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=new FormData,i.append("file",a.convertBase64UrlToBlob(e.base64(),e.blob().type,e.filename())),n.next=4,Object(u["a"])(i);case 4:c=n.sent,o=c.data,a.fileId=o,setTimeout((function(){t(o)}),1e3);case 8:case"end":return n.stop()}}),n)})))()},convertBase64UrlToBlob:function(e,t,n){if(-1!==e.indexOf(",")){var i=e.split(","),a=i[0].match(/:(.*?);/)[1],c=atob(i[1]),o=c.length,r=new Uint8Array(o);while(o--)r[o]=c.charCodeAt(o);return new File([new Blob([r],{type:a})],n,{type:a})}c=atob(e),o=c.length,r=new Uint8Array(o);while(o--)r[o]=c.charCodeAt(o);return new File([new Blob([r],{type:t})],n,{type:t})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()}}},m=d,h=(n("1733"),n("40cd"),n("5d22")),f=Object(h["a"])(m,i,a,!1,null,"29b6670e",null);t["a"]=f.exports},"91b6":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("b775");function a(e){return Object(i["a"])({url:"/api/upload/uploadImg",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:e})}},"9ed1":function(e,t,n){},b7ab:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about-me"},[n("el-row",{staticClass:"demo-autocomplete"},[n("el-col",{attrs:{lg:20,md:18,xs:24}},[n("tinymce",{staticClass:"tinymce",attrs:{height:500},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)],1),n("el-row",{staticClass:"demo-autocomplete"},[n("el-col",{attrs:{lg:20,md:18,xs:24}},[n("div",{staticClass:"save-btn"},[n("el-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.saveClick}},[e._v(e._s(e.isLoading?"提交中":"保存"))])],1)])],1)],1)},a=[],c=(n("6a61"),n("2e91")),o=n("8256"),r=n("c24f"),s={components:{Tinymce:o["a"]},data:function(){return{contentId:"",content:"",isLoading:!1,userId:1,type:1}},mounted:function(){this.getAboutContent()},methods:{getAboutContent:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["e"])(e.userId);case 2:n=t.sent,i=n.data,i&&(e.content=i.content,e.contentId=i.id),e.type=i?2:1;case 6:case"end":return t.stop()}}),t)})))()},addAboutContent:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={content:e.content},t.next=3,Object(r["a"])(n);case 3:i=t.sent,a=i.code,200===a&&e.$message.success("发布成功!");case 6:case"end":return t.stop()}}),t)})))()},editAboutContent:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={content:e.content,id:e.contentId},t.next=3,Object(r["c"])(n);case 3:i=t.sent,a=i.code,200===a&&e.$message.success("编辑成功!");case 6:case"end":return t.stop()}}),t)})))()},saveClick:function(){1===this.type?this.addAboutContent():this.editAboutContent()}}},l=s,u=(n("3314"),n("5d22")),d=Object(u["a"])(l,i,a,!1,null,"49e68138",null);t["default"]=d.exports},db68:function(e,t,n){}}]);