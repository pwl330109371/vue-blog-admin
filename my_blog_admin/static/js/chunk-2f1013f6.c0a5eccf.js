(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f1013f6"],{"4bf8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-tabs",{attrs:{type:"border-card"}},[r("el-tab-pane",{attrs:{label:"用户管理"}},[r("el-button",{staticClass:"creata-btn",attrs:{type:"primary",size:"small"},on:{click:e.createUser}},[e._v("创建用户"),r("i",{staticClass:"el-icon-user el-icon--right"})]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{label:"序号",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+1))]}}])}),r("el-table-column",{attrs:{prop:"date",label:"注册时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatTime")(t.row.createdAt))+" ")]}}])}),r("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"180",align:"center"}}),r("el-table-column",{attrs:{prop:"nickName",label:"昵称",width:"180",align:"center"}}),r("el-table-column",{attrs:{label:"性别",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.gender?r("el-tag",[e._v("男")]):e._e(),2==t.row.gender?r("el-tag",{attrs:{type:"danger"}},[e._v("女")]):e._e(),3==t.row.gender?r("el-tag",{attrs:{type:"warning"}},[e._v("保密")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"角色",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.role?r("el-tag",[e._v("超级管理员")]):e._e(),2===t.row.role?r("el-tag",{attrs:{type:"danger"}},[e._v("管理员")]):e._e(),3===t.row.role?r("el-tag",{attrs:{type:"warning"}},[e._v("普通用户")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"头像",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{attrs:{src:e.row.picture}})]}}])}),r("el-table-column",{attrs:{prop:"city",label:"地址"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v(" 编辑 ")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row.id)}}},[e._v(" 删除 ")])]}}])})],1),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-change":e.handleChange,total:10}})],1)],1)],1),r("addUser",{on:{updata:e.updata}})],1)},i=[],l=(r("ea69"),r("6a61"),r("2e91")),o=r("c24f"),n=r("7e41"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:e.dialogWidth},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-position":e.labelPosition,rules:e.rules}},[1===e.type?r("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"userName"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入用户名(登录账号!)",maxlength:"15","show-word-limit":""},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1):e._e(),1===e.type?r("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码",maxlength:"15","show-word-limit":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),r("el-form-item",{attrs:{label:"昵称","label-width":e.formLabelWidth,prop:"nickName"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入用户昵称",maxlength:"15","show-word-limit":""},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),r("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth,prop:"gender"}},[r("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[r("el-radio",{attrs:{label:"1"}},[e._v("男")]),r("el-radio",{attrs:{label:"2"}},[e._v("女")]),r("el-radio",{attrs:{label:"3"}},[e._v("保密")])],1)],1),r("el-form-item",{attrs:{label:"角色","label-width":e.formLabelWidth,prop:"role"}},[r("el-radio-group",{model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[r("el-radio",{attrs:{label:1}},[e._v("超级管理员")]),r("el-radio",{attrs:{label:2}},[e._v("管理员")]),r("el-radio",{attrs:{label:3}},[e._v("普通用户")])],1)],1),r("el-form-item",{attrs:{label:"头像","label-width":e.formLabelWidth}},[r("div",{staticClass:"bottomMiddle"},[r("el-upload",{ref:"upload",staticClass:"avatar",class:e.fileList.length>0?"active":"",attrs:{action:"1",limit:e.limit,accept:"image/jpeg,image/jpg,image/png,image/bmp,image/webp,image/gif","on-change":e.beforeAvatarUpload,"on-remove":e.handRemove,"list-type":"picture-card","auto-upload":!1,"file-list":e.fileList,"http-request":e.uploadSuccess}},[0===e.fileList.length?r("i",{staticClass:"el-icon-plus"}):e._e()])],1)])],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},c=[],u=r("3e83"),d=r("91b6"),m={data:function(){return{dialogFormVisible:!1,form:{userName:"",password:"",nickName:"",gender:"1",role:3},title:"创建用户",type:1,limit:1,fileList:[],fileData:"",fileInfo:"",formLabelWidth:"100px",labelPosition:"left",dialogWidth:"50%",rules:{userName:[{required:!0,message:"请输入用户名名称",trigger:"blur"},{min:2,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:2,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 10 个字符",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"blur"}]}}},computed:{device:function(){return this.$store.state.app.device}},mounted:function(){var e=this;n["a"].$off("creataUser"),n["a"].$on("creataUser",(function(t){console.log(t),e.dialogFormVisible=!0,e.type=1===t?1:2,e.title=1===t?"创建用户":"编辑用户",console.log(e.type,e.title),"object"===Object(u["a"])(t)&&(e.form=Object.assign({},t),t.picture&&(e.fileInfo=t.picture,e.fileList.push({name:"xxx",url:t.picture})))})),this.labelPosition="desktop"===this.device?"left":"top",this.dialogWidth="desktop"===this.device?"50%":"90%"},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(r){var a,i,l,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=23;break}if(t.$refs.upload.submit(),0===t.fileList.length||""!==t.fileInfo){e.next=5;break}return e.next=5,Object(d["a"])(t.fileData).then((function(e){t.fileInfo=e.data}));case 5:if(a={picture:t.fileInfo,gender:t.form.gender,nickName:t.form.nickName,role:t.form.role,userId:t.id},1!==t.type){e.next=16;break}return a.userName=t.form.userName,a.password=t.form.password,e.next=11,Object(o["j"])(a);case 11:i=e.sent,l=i.code,200===l&&(t.$message.success("创建成功!"),t.resetForm("ruleForm"),t.$emit("updata")),e.next=22;break;case 16:return a.userId=t.form.id,e.next=19,Object(o["d"])(a);case 19:n=e.sent,s=n.code,200===s&&(t.$message.success("编辑成功!"),t.resetForm("ruleForm"),t.$emit("updata"));case 22:t.fileInfo="";case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},beforeAvatarUpload:function(e,t){console.log(e,t),this.fileList=t;var r="image/jpeg"===e.type||"image/jpg",a=e.size/1024/1024<5;return r||this.$message.error("上传头像图片只能是 /jpeg/png/jpeg 格式!"),a||this.$message.error("上传头像图片大小不能超过 5MB!"),r&&a},handRemove:function(e,t){this.fileList=t},uploadSuccess:function(e){this.fileData=new FormData,this.fileData.append("file",e.file)},resetForm:function(e){this.fileList=[],this.dialogFormVisible=!1}}},f=m,p=(r("e8e8"),r("5d22")),g=Object(p["a"])(f,s,c,!1,null,"3488c488",null),b=g.exports,h={components:{addUser:b},data:function(){return{tableData:[]}},mounted:function(){this.getUserList()},methods:{handleChange:function(e){console.log(e)},getUserList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["g"])();case 2:r=t.sent,a=r.data,e.tableData=a;case 5:case"end":return t.stop()}}),t)})))()},createUser:function(){n["a"].$emit("creataUser",1)},handleEdit:function(e){n["a"].$emit("creataUser",e)},updata:function(){this.getUserList()},handleDelete:function(e,t){var r=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function a(){var i,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["b"])(t);case 2:i=a.sent,l=i.code,200===l&&(r.$message({type:"success",message:"删除成功!"}),r.tableData.splice(e,1));case 5:case"end":return a.stop()}}),a)})))).catch((function(){r.$message({type:"info",message:"已取消删除"})}))}}},v=h,w=(r("bc5a"),Object(p["a"])(v,a,i,!1,null,"7a0d4bb0",null));t["default"]=w.exports},"7e41":function(e,t,r){"use strict";var a=r("6e6d");t["a"]=new a["default"]},9152:function(e,t,r){},"91b6":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r("b775");function i(e){return Object(a["a"])({url:"/api/upload/uploadImg",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:e})}},9455:function(e,t,r){},bc5a:function(e,t,r){"use strict";r("9152")},e8e8:function(e,t,r){"use strict";r("9455")},ea69:function(e,t,r){"use strict";var a=r("1c8b"),i=r("e1d6"),l=r("3da3"),o=r("d88d"),n=r("3553"),s=r("1ca1"),c=r("1bbd"),u=r("1ea7"),d=r("ff9c"),m=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,b=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m||!f},{splice:function(e,t){var r,a,u,d,m,f,v=n(this),w=o(v.length),_=i(e,w),k=arguments.length;if(0===k?r=a=0:1===k?(r=0,a=w-_):(r=k-2,a=g(p(l(t),0),w-_)),w+r-a>b)throw TypeError(h);for(u=s(v,a),d=0;d<a;d++)m=_+d,m in v&&c(u,d,v[m]);if(u.length=a,r<a){for(d=_;d<w-a;d++)m=d+a,f=d+r,m in v?v[f]=v[m]:delete v[f];for(d=w;d>w-a+r;d--)delete v[d-1]}else if(r>a)for(d=w-a;d>_;d--)m=d+a-1,f=d+r-1,m in v?v[f]=v[m]:delete v[f];for(d=0;d<r;d++)v[d+_]=arguments[d+2];return v.length=w-a+r,u}})}}]);