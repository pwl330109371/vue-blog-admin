(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-542447f1"],{"04ed":function(e,t,i){},1733:function(e,t,i){"use strict";i("9ed1")},"1a5e":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"img-container"},[i("el-dialog",{attrs:{title:"选择封面(单击选中，双击预览)",visible:e.dialogFormVisible,width:e.dialogWidth},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.load,expression:"load"}],staticClass:"infinite-list",staticStyle:{overflow:"auto",height:"450px"}},e._l(e.tableData,(function(t,n){return i("li",{key:t.id,staticClass:"infinite-list-item"},[i("el-image",{staticClass:"item-img",class:e.selectActive===n?"active":"",attrs:{fit:"cover",src:t.imgUrl,lazy:""},on:{click:function(i){return e.selectImg(n,t.imgUrl)},dblclick:function(t){e.dialogVisible=!0}}})],1)})),0),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.selectImgUrl,alt:""}})])],1)},a=[],r=(i("b4fb"),i("6a61"),i("2e91")),o=i("5333"),s={data:function(){return{dialogFormVisible:!1,dialogVisible:!1,selectActive:0,selectImgUrl:"",dialogWidth:"80%",tableData:[],req:{pageIndex:1,pageSize:10,total:0}}},computed:{device:function(){return this.$store.state.app.device}},mounted:function(){this.dialogWidth="desktop"===this.device?"70%":"95%",this.getImgList()},methods:{getImgList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var i,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={categoryId:"",pageIndex:e.req.pageIndex,pageSize:e.req.pageSize},t.next=3,Object(o["b"])(i);case 3:if(n=t.sent,a=n.data,0!==a.rows.length){t.next=7;break}return t.abrupt("return");case 7:e.tableData=e.tableData.concat(a.rows),e.req.total=a.total,e.selectImgUrl=a.rows[0].imgUrl;case 10:case"end":return t.stop()}}),t)})))()},selectImg:function(e,t){this.selectActive=e,this.selectImgUrl=t},submitForm:function(){this.$emit("selectImgUrl",this.selectImgUrl),this.dialogFormVisible=!1},load:function(){this.req.pageIndex+=1,this.getImgList()}}},l=s,c=(i("8dd9"),i("5d22")),u=Object(c["a"])(l,n,a,!1,null,"21d2c2db",null);t["a"]=u.exports},2423:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return s}));var n=i("b775");function a(e){return Object(n["a"])({url:"/api/article/addArticle",method:"POST",data:e})}function r(e){return Object(n["a"])({url:"/api/article/editArticle",method:"PUT",data:e})}function o(e){return Object(n["a"])({url:"/api/article/delArticle?articleId="+e,method:"DELETE"})}function s(e){return Object(n["a"])({url:"/api/article/getArticleList",method:"GET",params:e})}},"3a72":function(e,t,i){"use strict";i("04ed")},"40cd":function(e,t,i){"use strict";i("db68")},5333:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return r}));var n=i("b775");function a(e){return Object(n["a"])({url:"/api/img/createImg",method:"POST",data:e})}function r(e){return Object(n["a"])({url:"/api/img/getImgList",method:"GET",params:e})}},8256:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:e.fullscreen}},[e.isInline?e._e():i("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),e.isInline?i("div",{class:{isInline:e.isInline},style:{height:e.height+"px"},attrs:{id:e.tinymceId}}):e._e(),e.isInline?e._e():i("div",{staticClass:"editor-custom-btn-container"})])},a=[],r=(i("ecb4"),i("3e54"),i("513c"),i("20a5"),i("e18c"),i("e35a"),i("f4e3"),i("0d7a"),i("8256b"),i("ab6e"),i("927c"),i("3c51"),i("db0a"),i("1cc1"),i("ab0f"),i("fc6e"),i("f30b"),i("cfd1"),i("d104"),i("f74a"),i("3598"),i("b497"),i("2909"),i("a7ef"),i("b523"),i("e671"),i("4140"),i("83db"),i("829d"),i("939f"),i("1bb1"),i("c3ba"),i("6a61"),i("2e91")),o=["advlist  autolink autosave contextmenu directionality emoticons codesample fullscreen hr image imagetools media insertdatetime  lists  nonbreaking noneditable  paste preview print save searchreplace spellchecker tabfocus table template textcolor     "],s=o,l=[" searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent   undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap  anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen formatselect fontselect"],c=l,u=i("91b6"),d={name:"Tinymce",props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"false"},height:{type:Number,required:!1,default:450},isInline:{type:Boolean,default:!1}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"},fileId:null,imgUrl:null}},computed:{language:function(){return this.languageTypeList["zh"]}},watch:{value:function(e){var t=this;console.log(456),!this.hasChange&&this.hasInit&&(console.log(890),this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")})))},language:function(){var e=this;this.destroyTinymce(),this.$nextTick((function(){return e.initTinymce()}))},height:function(e){this.initTinymce()}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var e=this,t=this;window.tinymce.init({convert_urls:!0,inline:t.isInline,statusbar:!1,language:this.language,selector:"#".concat(this.tinymceId),branding:!1,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:c,menubar:this.menubar,plugins:s,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){t.value&&i.setContent(t.value),t.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",i.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))},images_upload_handler:function(e,i,n,a){t.uploadImg(e,i,n,a)}})},uploadImg:function(e,t,i,n){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var n,r,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=new FormData,n.append("file",a.convertBase64UrlToBlob(e.base64(),e.blob().type,e.filename())),i.next=4,Object(u["a"])(n);case 4:r=i.sent,o=r.data,a.fileId=o,setTimeout((function(){t(o)}),1e3);case 8:case"end":return i.stop()}}),i)})))()},convertBase64UrlToBlob:function(e,t,i){if(-1!==e.indexOf(",")){var n=e.split(","),a=n[0].match(/:(.*?);/)[1],r=atob(n[1]),o=r.length,s=new Uint8Array(o);while(o--)s[o]=r.charCodeAt(o);return new File([new Blob([s],{type:a})],i,{type:a})}r=atob(e),o=r.length,s=new Uint8Array(o);while(o--)s[o]=r.charCodeAt(o);return new File([new Blob([s],{type:t})],i,{type:t})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()}}},m=d,f=(i("1733"),i("40cd"),i("5d22")),g=Object(f["a"])(m,n,a,!1,null,"29b6670e",null);t["a"]=g.exports},"83a3":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"add-article"},[i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",{attrs:{label:"发布文章"}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-position":e.labelPosition,"label-width":"90px",rules:e.rule}},[i("el-row",{staticClass:"demo-autocomplete",attrs:{gutter:20}},[i("el-col",{attrs:{lg:10,md:12,xs:24}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),i("el-col",{attrs:{lg:10,md:12,xs:24}},[i("el-form-item",{attrs:{label:"作者"}},[i("el-input",{attrs:{placeholder:"转载请标明出处,填写原作者名称与地址!"},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1)],1)],1),i("el-row",{staticClass:"demo-autocomplete",attrs:{gutter:20}},[i("el-col",{attrs:{lg:10,md:12,xs:24}},[i("el-form-item",{attrs:{label:"选择分类",prop:"categoryId"}},[i("el-cascader",{ref:"cascader",attrs:{options:e.options,placeholder:"请选择分类",props:{children:"subcategories",value:"id",label:"name"}},on:{change:e.handleChange},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,a=t.data;return[i("span",[e._v(e._s(a.name))]),n.isLeaf?e._e():i("span",[e._v(" ("+e._s(a.subcategories.length)+") ")])]}}]),model:{value:e.form.categoryId,callback:function(t){e.$set(e.form,"categoryId",t)},expression:"form.categoryId"}})],1)],1)],1),i("el-form-item",{attrs:{label:"封面和摘要"}},[i("div",{staticClass:"bottomMiddle"},[i("el-row",{staticClass:"demo-autocomplete",attrs:{gutter:5}},[i("el-col",{attrs:{lg:4,md:6,xs:24}},[i("el-upload",{ref:"upload",staticClass:"avatar",class:e.fileList.length>0?"active":"",attrs:{action:"1",limit:e.limit,accept:"image/jpeg,image/jpg,image/png,image/bmp,image/webp,image/gif","on-change":e.beforeAvatarUpload,"on-remove":e.handRemove,"list-type":"picture-card","auto-upload":!1,"file-list":e.fileList,"http-request":e.uploadSuccess}},[0===e.fileList.length?i("i",{staticClass:"el-icon-plus"}):e._e(),i("el-button",{staticClass:"select-img",attrs:{type:"default",size:"small"},on:{click:function(t){return t.stopPropagation(),e.selectImg(t)}}},[e._v("图库列表")])],1)],1),i("el-col",{attrs:{lg:16,md:18,xs:24}},[i("el-input",{staticClass:"thumn",attrs:{type:"textarea",placeholder:"选填，帮助用户快速了解内容，如不填写自动抓取内容前50字",maxlength:"120","show-word-limit":""},model:{value:e.form.make,callback:function(t){e.$set(e.form,"make",t)},expression:"form.make"}})],1)],1)],1)]),i("el-row",{staticClass:"demo-autocomplete"},[i("el-col",{attrs:{lg:20,md:18,xs:24}},[i("el-form-item",{staticClass:"content",attrs:{label:"内容",prop:"content"}},[i("tinymce",{ref:"editor",staticClass:"tinymce",attrs:{height:300,"is-inline":!1},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1)],1),i("el-row",{staticClass:"demo-autocomplete"},[i("el-col",{attrs:{lg:20,md:18,xs:24}},[i("el-form-item",{staticClass:"bottom"},[i("el-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:function(t){return e.saveClick("form")}}},[e._v(e._s(e.isLoading?"提交中":"保存"))])],1)],1)],1)],1)],1)],1),i("imgList",{ref:"imgList",on:{selectImgUrl:e.selectImgUrl}})],1)},a=[],r=(i("6a61"),i("2e91")),o=i("8256"),s=i("1a5e"),l=i("d28d"),c=i("91b6"),u=i("2423"),d={components:{Tinymce:o["a"],imgList:s["a"]},data:function(){return{labelPosition:"left",limit:1,options:[],fileList:[],fileData:"",fileInfo:"",isLoading:!1,form:{title:"",author:"",content:"",make:"",categoryName:"",categoryId:""},rule:{categoryId:[{required:!0,message:"请选择一级分类",trigger:"blur"}],title:[{required:!0,message:"标题不能为空",trigger:"blur"}],content:[{required:!0,message:"内容不能为空",trigger:"blur"}]}}},computed:{device:function(){return this.$store.state.app.device}},watch:{device:function(){this.labelPosition="desktop"===this.device?"left":"top"}},mounted:function(){this.getCategoryList(),this.labelPosition="desktop"===this.device?"left":"top"},methods:{selectImg:function(){this.$refs.imgList.dialogFormVisible=!0,console.log("xunze")},selectImgUrl:function(e){this.fileInfo=e,this.fileList.push({name:"xxx",url:e})},getCategoryList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["c"])();case 2:i=t.sent,n=i.data,e.options=n;case 5:case"end":return t.stop()}}),t)})))()},handleChange:function(e){var t=this.$refs["cascader"].getCheckedNodes();this.form.categoryName=t[0].label,this.form.categoryId=t[0].value},saveClick:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.$refs[e].validate(function(){var i=Object(r["a"])(regeneratorRuntime.mark((function i(n){var a,r,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!n){i.next=12;break}if(t.$refs.upload.submit(),0===t.fileList.length||""!==t.fileInfo){i.next=5;break}return i.next=5,Object(c["a"])(t.fileData).then((function(e){console.log(e),t.fileInfo=e.data}));case 5:return a={title:t.form.title,author:t.form.author,picture:t.fileInfo,categoryId:t.form.categoryId,categoryName:t.form.categoryName,describe:t.form.make,content:t.form.content},i.next=8,Object(u["a"])(a);case 8:r=i.sent,o=r.code,200===o&&(t.$message.success("创建成功!"),t.$refs[e].resetFields()),t.fileInfo="";case 12:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}());case 1:case"end":return i.stop()}}),i)})))()},beforeAvatarUpload:function(e,t){console.log(e,t),this.fileList=t;var i="image/jpeg"===e.type||"image/jpg",n=e.size/1024/1024<5;return i||this.$message.error("上传头像图片只能是 /jpeg/png/jpeg 格式!"),n||this.$message.error("上传头像图片大小不能超过 5MB!"),i&&n},handRemove:function(e,t){this.fileList=t,this.fileInfo=""},uploadSuccess:function(e){this.fileData=new FormData,this.fileData.append("file",e.file)}}},m=d,f=(i("3a72"),i("5d22")),g=Object(f["a"])(m,n,a,!1,null,"28536a85",null);t["default"]=g.exports},"8dd9":function(e,t,i){"use strict";i("f3d0")},"91b6":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("b775");function a(e){return Object(n["a"])({url:"/api/upload/uploadImg",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:e})}},"9ed1":function(e,t,i){},d28d:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return o}));var n=i("b775");function a(e){return Object(n["a"])({url:"/api/category/createCategory",method:"POST",data:e})}function r(e){return Object(n["a"])({url:"/api/category/getCategory",method:"GET",params:e})}function o(e){return Object(n["a"])({url:"/api/category/delCategory",method:"POST",data:e})}},db68:function(e,t,i){},f3d0:function(e,t,i){}}]);